# ğŸ”„ Git åŒå‘åŒæ­¥å·¥å…·

ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ Git åŒå‘åŒæ­¥è„šæœ¬ï¼Œæ”¯æŒè‡ªåŠ¨æ‹‰å–ã€æ¨é€å’Œæ™ºèƒ½æäº¤ä¿¡æ¯é€‰æ‹©ã€‚

## ğŸ“‹ ç›®å½•

- [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
- [å®‰è£…ä½¿ç”¨](#å®‰è£…ä½¿ç”¨)
- [æäº¤ä¿¡æ¯é€‰é¡¹è¯¦è§£](#æäº¤ä¿¡æ¯é€‰é¡¹è¯¦è§£)
- [ä½¿ç”¨åœºæ™¯](#ä½¿ç”¨åœºæ™¯)
- [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ”„ **åŒå‘åŒæ­¥**ï¼šè‡ªåŠ¨æ‹‰å–è¿œç¨‹å˜æ›´å¹¶æ¨é€æœ¬åœ°å˜æ›´
- ğŸ›¡ï¸ **æ™ºèƒ½æš‚å­˜**ï¼šè‡ªåŠ¨å¤„ç†æœ¬åœ°æœªæäº¤å˜æ›´ï¼Œé¿å…å†²çª
- ğŸ¯ **é¢„è®¾é€‰é¡¹**ï¼šæä¾›å¸¸ç”¨çš„æäº¤ä¿¡æ¯æ¨¡æ¿
- âœï¸ **è‡ªå®šä¹‰è¾“å…¥**ï¼šæ”¯æŒè‡ªå®šä¹‰è¯¦ç»†çš„æäº¤ä¿¡æ¯
- ğŸ” **è‡ªåŠ¨è®¤è¯**ï¼šä¸€æ¬¡é…ç½®ï¼Œæ°¸ä¹…ä½¿ç”¨
- ğŸ“Š **æ¸…æ™°åé¦ˆ**ï¼šå½©è‰²è¾“å‡ºï¼Œæ“ä½œçŠ¶æ€ä¸€ç›®äº†ç„¶

## ğŸš€ å®‰è£…ä½¿ç”¨

### 1. ä¸‹è½½è„šæœ¬
```bash
# ä¸‹è½½åˆ°ä½ çš„é¡¹ç›®ç›®å½•
wget https://your-gitea-host/path/to/auto-sync.sh
# æˆ–è€…ç›´æ¥åˆ›å»ºæ–‡ä»¶å¹¶å¤åˆ¶å†…å®¹
```

### 2. è®¾ç½®æƒé™
```bash
chmod +x auto-sync.sh
```

### 3. é…ç½®å‚æ•°
ç¼–è¾‘è„šæœ¬ä¸­çš„é…ç½®ä¿¡æ¯ï¼š
```bash
GITEA_USER="your-username"     # ä½ çš„ Gitea ç”¨æˆ·å
GITEA_PASS="your-password"     # ä½ çš„ Gitea å¯†ç 
GITEA_HOST="your-host:port"    # Gitea æœåŠ¡å™¨åœ°å€
```

### 4. è¿è¡ŒåŒæ­¥
```bash
./auto-sync.sh
```

## ğŸ“ æäº¤ä¿¡æ¯é€‰é¡¹è¯¦è§£

### 1ï¸âƒ£ æ›´æ–°è‡ªåŠ¨åŒ–è„šæœ¬
**é€‚ç”¨åœºæ™¯ï¼š**
- ä¿®æ”¹äº† `.sh` è„šæœ¬æ–‡ä»¶
- æ›´æ–°äº†è‡ªåŠ¨åŒ–ä»»åŠ¡é€»è¾‘
- æ”¹è¿›äº†è„šæœ¬åŠŸèƒ½
- ä¿®å¤äº†è„šæœ¬ bug

**ç¤ºä¾‹æ–‡ä»¶ï¼š**
```
auto-sync.sh
backup.sh
deploy.sh
monitor.sh
cleanup.sh
```

### 2ï¸âƒ£ æ›´æ–°é…ç½®æ–‡ä»¶
**é€‚ç”¨åœºæ™¯ï¼š**
- ä¿®æ”¹äº† `.yml/.yaml` æ–‡ä»¶
- æ›´æ–°äº† `.conf/.cfg` é…ç½®
- æ”¹å˜äº†ç¯å¢ƒå˜é‡
- è°ƒæ•´äº†æœåŠ¡é…ç½®

**ç¤ºä¾‹æ–‡ä»¶ï¼š**
```
docker-compose.yml
nginx.conf
config.yaml
.env
inventory
settings.json
```

### 3ï¸âƒ£ æ—¥å¸¸ç»´æŠ¤æ›´æ–°
**é€‚ç”¨åœºæ™¯ï¼š**
- å®šæœŸçš„å°å¹…è°ƒæ•´
- æ¸…ç†æ— ç”¨æ–‡ä»¶
- æ›´æ–°é¡¹ç›®æ–‡æ¡£
- å¸¸è§„ä¼˜åŒ–æ“ä½œ

**ç¤ºä¾‹æ“ä½œï¼š**
```
- åˆ é™¤ä¸´æ—¶æ–‡ä»¶
- æ›´æ–° README.md
- æ•´ç†ç›®å½•ç»“æ„
- å°å¹…åº¦æ”¹è¿›
- æ³¨é‡Šæ›´æ–°
```

### 4ï¸âƒ£ ä¿®å¤é—®é¢˜
**é€‚ç”¨åœºæ™¯ï¼š**
- è§£å†³äº†å…·ä½“ bug
- ä¿®å¤äº†é”™è¯¯é…ç½®
- è§£å†³äº†è¿è¡Œæ—¶é—®é¢˜
- ç´§æ€¥ä¿®å¤

**ç¤ºä¾‹æƒ…å†µï¼š**
```
- ä¿®å¤è¯­æ³•é”™è¯¯
- è§£å†³æƒé™é—®é¢˜
- ä¿®æ­£è·¯å¾„é”™è¯¯
- ä¿®å¤ä¾èµ–å†²çª
- è§£å†³ç½‘ç»œè¿æ¥é—®é¢˜
```

### 5ï¸âƒ£ åŠŸèƒ½ä¼˜åŒ–
**é€‚ç”¨åœºæ™¯ï¼š**
- æ·»åŠ æ–°åŠŸèƒ½æ¨¡å—
- æ€§èƒ½æ”¹è¿›
- ç”¨æˆ·ä½“éªŒæå‡
- åŠŸèƒ½å¢å¼º

**ç¤ºä¾‹æ“ä½œï¼š**
```
- æ·»åŠ æ–°çš„ç›‘æ§åŠŸèƒ½
- æ”¹è¿›é”™è¯¯å¤„ç†æœºåˆ¶
- å¢åŠ æ—¥å¿—è®°å½•
- ä¼˜åŒ–æ‰§è¡Œé€Ÿåº¦
- æ·»åŠ æ–°çš„é…ç½®é€‰é¡¹
```

### 0ï¸âƒ£ è‡ªå®šä¹‰è¾“å…¥
**é€‚ç”¨åœºæ™¯ï¼š**
- éœ€è¦æ›´å…·ä½“çš„æè¿°
- ç‰¹æ®Šæƒ…å†µè¯´æ˜
- è¯¦ç»†çš„å˜æ›´è®°å½•
- å¤æ‚çš„å¤šæ–‡ä»¶å˜æ›´

**ç¤ºä¾‹è‡ªå®šä¹‰ä¿¡æ¯ï¼š**
```
"æ·»åŠ  MySQL è‡ªåŠ¨å¤‡ä»½è„šæœ¬å’Œå®šæ—¶ä»»åŠ¡"
"ä¿®å¤ Nginx é…ç½®æ–‡ä»¶æƒé™é—®é¢˜"
"é›†æˆ Prometheus ç›‘æ§å’Œ Grafana ä»ªè¡¨æ¿"
"æ›´æ–° Ansible playbook å˜é‡å’Œæ¨¡æ¿"
"é‡æ„ç”¨æˆ·è®¤è¯æ¨¡å—ï¼Œæå‡å®‰å…¨æ€§"
```

### q é€€å‡ºï¼ˆä¸æäº¤ï¼‰
**é€‚ç”¨åœºæ™¯ï¼š**
- å‘ç°å˜æ›´æœ‰é—®é¢˜éœ€è¦ä¿®æ”¹
- éœ€è¦è¿›ä¸€æ­¥æ£€æŸ¥ä»£ç 
- æš‚æ—¶ä¸æƒ³æäº¤å˜æ›´
- è¯¯æ“ä½œäº†æ–‡ä»¶

## ğŸ¯ ä½¿ç”¨åœºæ™¯æŒ‡å—

### æ ¹æ®æ–‡ä»¶ç±»å‹é€‰æ‹©

| æ–‡ä»¶ç±»å‹ | æ¨èé€‰é¡¹ | è¯´æ˜ |
|---------|---------|------|
| `.sh` è„šæœ¬æ–‡ä»¶ | **1** | æ›´æ–°è‡ªåŠ¨åŒ–è„šæœ¬ |
| `.yml/.yaml` é…ç½® | **2** | æ›´æ–°é…ç½®æ–‡ä»¶ |
| `.conf/.cfg` é…ç½® | **2** | æ›´æ–°é…ç½®æ–‡ä»¶ |
| `README/æ–‡æ¡£` | **3** | æ—¥å¸¸ç»´æŠ¤æ›´æ–° |
| é”™è¯¯ä¿®å¤ | **4** | ä¿®å¤é—®é¢˜ |
| æ–°åŠŸèƒ½æ·»åŠ  | **5** | åŠŸèƒ½ä¼˜åŒ– |
| å¤æ‚å˜æ›´ | **0** | è‡ªå®šä¹‰è¯¦ç»†æè¿° |

### å®é™…ä½¿ç”¨ç¤ºä¾‹

```bash
# åœºæ™¯1ï¼šä¿®æ”¹äº† docker-compose.yml ä¸­çš„ç«¯å£é…ç½®
é€‰æ‹©ï¼š2 (æ›´æ–°é…ç½®æ–‡ä»¶)

# åœºæ™¯2ï¼šæ·»åŠ äº†æ–°çš„ç³»ç»Ÿç›‘æ§è„šæœ¬
é€‰æ‹©ï¼š5 (åŠŸèƒ½ä¼˜åŒ–) æˆ– 0 (è‡ªå®šä¹‰ï¼š"æ·»åŠ ç³»ç»Ÿèµ„æºç›‘æ§è„šæœ¬")

# åœºæ™¯3ï¼šä¿®å¤äº†æ–‡ä»¶æƒé™å¯¼è‡´çš„æœåŠ¡å¯åŠ¨å¤±è´¥
é€‰æ‹©ï¼š4 (ä¿®å¤é—®é¢˜)

# åœºæ™¯4ï¼šæ›´æ–°äº†å¤šä¸ªè‡ªåŠ¨åŒ–è„šæœ¬çš„é€»è¾‘
é€‰æ‹©ï¼š1 (æ›´æ–°è‡ªåŠ¨åŒ–è„šæœ¬)

# åœºæ™¯5ï¼šæ•´ç†é¡¹ç›®ç»“æ„ï¼Œæ›´æ–°äº†æ–‡æ¡£
é€‰æ‹©ï¼š3 (æ—¥å¸¸ç»´æŠ¤æ›´æ–°)

# åœºæ™¯6ï¼šé‡å¤§åŠŸèƒ½æ›´æ–°ï¼Œæ¶‰åŠå¤šä¸ªæ¨¡å—
é€‰æ‹©ï¼š0 (è‡ªå®šä¹‰ï¼š"é‡æ„è®¤è¯ç³»ç»Ÿï¼Œæ·»åŠ åŒå› å­éªŒè¯")
```

## âš™ï¸ é…ç½®è¯´æ˜

### Git é…ç½®
è„šæœ¬ä¼šè‡ªåŠ¨é…ç½®ä»¥ä¸‹ Git è®¾ç½®ï¼š
```bash
git config pull.rebase false          # ä½¿ç”¨ merge ç­–ç•¥
git config credential.helper store    # å­˜å‚¨è®¤è¯ä¿¡æ¯
```

### è®¤è¯æ–‡ä»¶
è®¤è¯ä¿¡æ¯å­˜å‚¨åœ¨ `~/.git-credentials`ï¼Œæ ¼å¼ï¼š
```
http://username:password@host:port
```

### å®‰å…¨å»ºè®®
- ä½¿ç”¨ Gitea çš„ **Access Token** æ›¿ä»£å¯†ç 
- å®šæœŸæ›´æ¢è®¤è¯ä¿¡æ¯
- ç¡®ä¿ `.git-credentials` æ–‡ä»¶æƒé™ä¸º 600

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. è®¤è¯å¤±è´¥
```bash
# æ£€æŸ¥è®¤è¯é…ç½®
cat ~/.git-credentials

# é‡æ–°é…ç½®è®¤è¯
rm ~/.git-credentials
./auto-sync.sh
```

#### 2. æ‹‰å–å†²çª
```bash
# è„šæœ¬ä¼šè‡ªåŠ¨å¤„ç†ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼š
git stash
git pull gitea master
git stash pop
```

#### 3. æ¨é€å¤±è´¥
```bash
# æ£€æŸ¥è¿œç¨‹ä»“åº“çŠ¶æ€
git remote -v
git status

# å¼ºåˆ¶æ¨é€ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
git push gitea master --force
```

#### 4. é€‰é¡¹ä¸æ˜¾ç¤º
ç¡®ä¿åœ¨äº¤äº’å¼ç»ˆç«¯ä¸­è¿è¡Œï¼š
```bash
# æ£€æŸ¥ç»ˆç«¯ç¯å¢ƒ
echo $TERM
tty

# å¦‚æœåœ¨éäº¤äº’ç¯å¢ƒï¼Œä½¿ç”¨ç®€å•ç‰ˆæœ¬
./simple-sync.sh "æäº¤ä¿¡æ¯"
```

### æ—¥å¿—è°ƒè¯•
æ·»åŠ è°ƒè¯•ä¿¡æ¯ï¼š
```bash
# åœ¨è„šæœ¬å¼€å¤´æ·»åŠ 
set -x  # æ˜¾ç¤ºæ‰§è¡Œçš„å‘½ä»¤
set -e  # é‡åˆ°é”™è¯¯ç«‹å³é€€å‡º
```

## ğŸ“š è¿›é˜¶ä½¿ç”¨

### åˆ›å»ºåˆ«å
```bash
# æ·»åŠ åˆ° ~/.bashrc æˆ– ~/.zshrc
alias gsync='./auto-sync.sh'
alias gquick='./auto-sync.sh && echo "åŒæ­¥å®Œæˆ"'
```

### å®šæ—¶åŒæ­¥
```bash
# æ·»åŠ åˆ° crontab
# æ¯å°æ—¶è‡ªåŠ¨åŒæ­¥
0 * * * * cd /path/to/your/repo && ./auto-sync.sh >/dev/null 2>&1
```

### é›†æˆåˆ° CI/CD
```yaml
# .gitea/workflows/sync.yml
name: Auto Sync
on:
schedule:
  - cron: '0 */6 * * *'  # æ¯6å°æ—¶è¿è¡Œä¸€æ¬¡
jobs:
sync:
  runs-on: ubuntu-latest
  steps:
    - uses: actions/checkout@v3
    - name: Run sync
      run: ./auto-sync.sh
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### å¼€å‘è§„èŒƒ
- éµå¾ª Shell è„šæœ¬æœ€ä½³å®è·µ
- æ·»åŠ é€‚å½“çš„é”™è¯¯å¤„ç†
- ä¿æŒä»£ç æ³¨é‡Šæ¸…æ™°
- æµ‹è¯•å„ç§ä½¿ç”¨åœºæ™¯

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…å’Œä½¿ç”¨è€…çš„åé¦ˆï¼

---

**å¿«é€Ÿå¼€å§‹ï¼š** `chmod +x auto-sync.sh && ./auto-sync.sh`

**é—®é¢˜åé¦ˆï¼š** [Issues](../../issues)

**æœ€åæ›´æ–°ï¼š** $(date '+%Y-%m-%d')
